(async function(){function a(a){return new Promise(b=>setTimeout(b,a))}function b(){itemclasses=[...document.querySelectorAll("div")].map(a=>a.className).filter(a=>3===(a.match(/\s/g)||[]).length),itemclass=(a=>a.reduce((c,a,b,d)=>d.filter(a=>a===c).length>=d.filter(b=>b===a).length?c:a,null))(itemclasses);var a=[...document.querySelectorAll(`div[class="${itemclass}"]`)].map(a=>(article={},keys=["title","subtitle","publisher"],a.querySelectorAll("a").forEach((a,b)=>{article[keys[b]]=a.innerText,0===b&&(article.url=a.href.split("?")[0])}),article));switch(console.log(a),window.location.href){case"https://medium.com/me/stories/public":fname="stories.json";break;case"https://medium.com/me/stats":fname="stats.json";break;default:alert("You are not on the Stories or Stats page on medium");}var b="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(a)),c=document.createElement("a");c.setAttribute("href",b),c.setAttribute("download",fname),c.click()}for(OldHeight=0,ContinueCycle=!0;ContinueCycle;)await a(4e3),window.scrollTo(0,document.body.scrollHeight),document.body.scrollHeight===OldHeight?(b(),ContinueCycle=!1):OldHeight=document.body.scrollHeight})();
